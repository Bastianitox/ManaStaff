<ion-content>
  <div class="content-wrapper">
    <!-- Información del documento -->
    <div class="document-info-card">
      <h2 class="document-title">{{ doc.title }}</h2>
      <div class="document-meta">
        <span>{{ doc.format }}</span>
        <span class="meta-separator">•</span>
        <span>{{ doc.size }}</span>
        <span class="meta-separator">•</span>
        <span>{{ doc.date }}</span>
      </div>
    </div>

    <!-- Botón de descarga -->
    <div class="download-section" *ngIf="doc.downloadUrl">
      <ion-button 
        expand="block" 
        class="download-button"
        (click)="descargarDocumento(doc.id, doc.title)">
        <ion-icon slot="start" name="download-outline"></ion-icon>
        Descargar documento
      </ion-button>
    </div>

    <div class="download-section" *ngIf="!doc.downloadUrl">
      <ion-button 
        expand="block" 
        class="download-button disabled"
        disabled>
        <ion-icon slot="start" name="download-outline"></ion-icon>
        Descarga no disponible
      </ion-button>
    </div>

    <!-- Visor del documento -->
    <div class="document-viewer-card">
      <!-- Caso 1: Documento disponible con fileUrl -->
      <div class="viewer-container" *ngIf="doc.fileUrl && doc.format === 'PDF'">
      <pdf-viewer 
        [src]="pdfSrc" 
        [render-text]="true" 
        [original-size]="false" 
        style="width: 100%; height: 500px;" 
        [fit-to-page]="true"
        [autoresize]="true"
        (after-load-complete)="pdfCargado($event)"> 
      </pdf-viewer>
    </div>

    <div class="empty-state" *ngIf="doc.fileUrl && doc.format !== 'PDF'">
      <p>Solo los archivos PDF pueden mostrarse en línea. Usa el botón de descarga.</p>
    </div>

      <!-- Caso 2: Documento no disponible -->
      <div class="empty-state" *ngIf="!doc.fileUrl">
        <div class="empty-icon">
          <ion-icon name="alert-circle-outline"></ion-icon>
        </div>
        <h3 class="empty-title">Documento no disponible</h3>
        <p class="empty-description">
          El documento solicitado no está disponible o no se pudo encontrar.
        </p>
        <ion-button 
          class="back-to-list-button"
          (click)="goBackToList()">
          Volver a Mis documentos
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>